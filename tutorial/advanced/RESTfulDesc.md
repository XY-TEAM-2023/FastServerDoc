# RESTful路由介绍

## 1. 简介

RESTful 它是一种设计风格和架构模式，用于构建分布式系统中的网络服务

REST 式的 web 服务是一种 ROA（面向资源的架构），所有的数据都可视为资源，比如用户列表中每一个用户都是一个资源，然后针对资源进行创建、查询、更新、修改、删除

---

## 2. 资源操作

请求方法对应不同的请求动作(数据库或者业务逻辑)

### 2.1 GET 查询

查询出一个或多个资源

| 操作                       | 传统 URL 请求格式   | RESTful 请求格式    | 备注                                     |
| -------------------------- | ------------------- | ------------------- | ---------------------------------------- |
| 拉取用户列表               | /users?limit=10     | /users?limit=10     |                                          |
| 根据用户 id 查询           | /user?id=123        | /users/123          | 资源唯一 ID 作为路径                     |
| 根据用户 id 查询数据且分页 | /users?account=coco | /users?account=coco | 资源唯一 ID 以外的参数，只能作为查询参数 |

### 2.2 POST 创建

创建一个资源

| 操作         | 传统 URL 请求格式          | RESTful 请求格式   | 补充                                              |
| ------------ | -------------------------- | ------------------ | ------------------------------------------------- |
| 新增用户     | /users/create              | /users             |                                                   |
| 用户之间转钱 | /users/1/transfer/100/to/2 | /users/transaction | 提交参数：type=transfer&form=1&to=2&amount=100.00 |

### 2.3 PUT 更新

更新资源（客户端提供改变后的完整资源）

| 操作         | 传统 URL 请求格式 | RESTful 请求格式 |
| ------------ | ----------------- | ---------------- |
| 更新用户信息 | /user/update/123  | /user/123        |

### 2.4 PATCH 修改

修改资源（客户端提供改变的属性）

| 操作             | 传统 URL 请求格式 | RESTful 请求格式 |
| ---------------- | ----------------- | ---------------- |
| 部分更新用户信息 | /users/edit/123   | /users/123       |

### 2.5 DELETE 修改

| 操作     | 传统 URL 请求格式 | RESTful 请求格式 |
| -------- | ----------------- | ---------------- |
| 删除用户 | /users/delete/123 | /users/123       |

---

## 3. 路由规则

### 3.1 静态路由

静态路由是指在 URL 中直接指定资源的路径或标识符，用于获取特定资源或执行某些操作

- `/users`：表示获取所有用户的列表
- `/users/{id}`：表示获取特定用户的详细信息

### 3.2 参数化路由

参数化路由允许在 URL 中**使用参数来筛选或过滤资源**。参数通常以查询字符串的形式出现，用于传递额外的信息

- `/users/{id}/articles`：表示获取特定用户的**文章列表**
- `/articles?category=technology`：表示获取**特定分类**的文章列表

### 3.3 组合路由

指将多个**资源的标识符**结合在一起形成的 URL 路径

- `/users/{id}/articles/{articleId}`：表示获取特定用户的特定文章的详细信息

### 3.4 动词路由

**这是错误的**。在 restful 中，是**不允许出现动词**的（add、delete），因为 url 是指定一个资源，在特定的情况下，如果需要一些特殊动作时，可以使用 `transaction`。假设定义这样一个路由：用户 1 向 用户 2 转 100 块钱

- 请求类型：`POST`

- URL：`/users/transaction`

- 参数：`type=transfer&form=1&to=2&amount=100.00`

### 3.5 嵌套路由

嵌套路由是指将资源路径嵌套在其他资源路径中，以建立资源之间的层次关系。这种路由模式常用于表示资源之间的父子关系

- `/users/{id}/articles/{articleId}/comments/{commentId}`，表示对特定文章的特定评论进行操作

### 3.6 版本化路由

**这是错误的**。指在 URL 中包含版本号来区分不同版本的 API，比如：`/v1/users`

正确的做法是在请求头中添加版本信息
