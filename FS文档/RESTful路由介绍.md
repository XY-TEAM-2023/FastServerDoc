## 1. 简介

RESTful 它是一种设计风格和架构模式，用于构建分布式系统中的网络服务

REST 式的 web 服务是一种 ROA（面向资源的架构），所有的数据都可视为资源，比如用户列表中每一个用户都是一个资源，然后针对资源进行创建、查询、更新、修改、删除

---

## 2. 资源操作

请求方法对应不同的请求动作(数据库或者业务逻辑)

### 2.1 GET 查询

查询出一个或多个资源

| 操作                       | 传统 URL 请求格式   | RESTful 请求格式    | 备注                                     |
| -------------------------- | ------------------- | ------------------- | ---------------------------------------- |
| 拉取用户列表               | /users?limit=10     | /users?limit=10     |                                          |
| 根据用户 id 查询           | /user?id=123        | /users/123          | 资源唯一 ID 作为路径                     |
| 根据用户 id 查询数据且分页 | /users?account=coco | /users?account=coco | 资源唯一 ID 以外的参数，只能作为查询参数 |

### 2.2 POST 创建

创建一个资源

| 操作         | 传统 URL 请求格式          | RESTful 请求格式   | 补充                                              |
| ------------ | -------------------------- | ------------------ | ------------------------------------------------- |
| 新增用户     | /users/create              | /users             |                                                   |
| 用户之间转钱 | /users/1/transfer/100/to/2 | /users/transaction | 提交参数：type=transfer&form=1&to=2&amount=100.00 |

### 2.3 PUT 更新

更新资源（客户端提供改变后的完整资源）

| 操作         | 传统 URL 请求格式 | RESTful 请求格式 |
| ------------ | ----------------- | ---------------- |
| 更新用户信息 | /user/update/123  | /user/123        |

### 2.4 PATCH 修改

修改资源（客户端提供改变的属性）

| 操作             | 传统 URL 请求格式 | RESTful 请求格式 |
| ---------------- | ----------------- | ---------------- |
| 部分更新用户信息 | /users/edit/123   | /users/123       |

### 2.5 DELETE 修改

| 操作     | 传统 URL 请求格式 | RESTful 请求格式 |
| -------- | ----------------- | ---------------- |
| 删除用户 | /users/delete/123 | /users/123       |

---

## 3. 路由规则

### 3.1 静态路由

静态路由是指在 URL 中直接指定资源的路径或标识符，用于获取特定资源或执行某些操作

- `/users`：表示获取所有用户的列表
- `/users/{id}`：表示获取特定用户的详细信息

### 3.2 参数化路由

参数化路由允许在 URL 中**使用参数来筛选或过滤资源**。参数通常以查询字符串的形式出现，用于传递额外的信息

- `/users/{id}/articles`：表示获取特定用户的**文章列表**
- `/articles?category=technology`：表示获取**特定分类**的文章列表

### 3.3 组合路由

指将多个**资源的标识符**结合在一起形成的 URL 路径

- `/users/{id}/articles/{articleId}`：表示获取特定用户的特定文章的详细信息

### 3.4 动词路由

**这是错误的**。在 restful 中，是**不允许出现动词**的（add、delete），因为 url 是指定一个资源，在特定的情况下，如果需要一些特殊动作时，可以使用 `transaction`。假设定义这样一个路由：用户 1 向 用户 2 转 100 块钱

- 请求类型：`POST`

- URL：`/users/transaction`

- 参数：`type=transfer&form=1&to=2&amount=100.00`

### 3.5 嵌套路由

嵌套路由是指将资源路径嵌套在其他资源路径中，以建立资源之间的层次关系。这种路由模式常用于表示资源之间的父子关系

- `/users/{id}/articles/{articleId}/comments/{commentId}`，表示对特定文章的特定评论进行操作

### 3.6 版本化路由

**这是错误的**。指在 URL 中包含版本号来区分不同版本的 API，比如：`/v1/users`

正确的做法是在请求头中添加版本信息

---

## 4. HTTP 状态码

在使用 RESTful 规范时，不同的情况对应的 HTTP 响应码不同

| Code | HTTP Operation   | 响应内容（参考）         | 描述                                                                                                   |
| ---- | ---------------- | ------------------------ | ------------------------------------------------------------------------------------------------------ |
| 200  | ALL              | 资源                     | 操作成功                                                                                               |
| 201  | POST             | 新资源的 URL             | 创建成功                                                                                               |
| 301  | GET、HEAD        | 新位置的 URL             | 请求的资源**永久**移动到新位置，资源标识发生了变化或 URL 已废弃                                        |
| 302  | GET、HEAD        | 新位置的 URL             | 请求的资源**暂时**移动到新位置                                                                         |
| 304  | GET、HEAD        | 响应头中包含缓存验证信息 | 表示客户端的缓存副本仍然有效，并且未被修改过<br />客户端可以使用缓存的副本，而无需从服务器重新获取资源 |
| 400  | ALL              |                          | 无效的请求参数、缺少必需的参数等                                                                       |
| 401  | ALL              |                          | 请求未经授权，要求进行身份验证或登录                                                                   |
| 403  | ALL              |                          | 权限不足、访问被禁止                                                                                   |
| 404  | ALL              |                          | 请求的资源不存在或未找到。服务器无法找到与请求 URI 匹配的资源                                          |
| 405  | ALL              |                          | 请求方法不被允许访问该资源                                                                             |
| 409  | ALL              |                          | 由于请求引起的冲突，导致请求无法完成<br />这由于资源状态冲突、重复创建资源等                           |
| 413  | POST、PUT、PATCH |                          | 表示请求提交的数据大，服务器拒绝处理该请求<br />客户端可以尝试减小请求的大小                           |
| 415  | POST、PUT、PATCH |                          | 服务器不支持请求中所指定的媒体类型<br />客户端可能需要使用其他的媒体类型进行请求                       |
| 429  | ALL              |                          | 请求过于频繁                                                                                           |
| 500  | ALL              | 有关错误的详细信息       | 服务器在处理请求时遇到了意外的错误，因此无法完成请求<br />比如服务器配置错误、代码错误或其他内部问题   |
| 501  | ALL              |                          | 尚未实现                                                                                               |

